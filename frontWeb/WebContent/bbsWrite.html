<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<style type="text/css">
	#app{margin: auto; margin-top: 60px; padding: 10px;}
	h1{text-align: center;}
</style>
</head>
<body>
	<div id="app" class="container">
		<h1>게시물 작성</h1>
		<form id="frm">
			<div style="width: 1000px" align="center">
				<table class="table table-bordered">
					<col width="200"><col width="400">
					<tr>
						<th class="table-primary">아이디</th>
						<td><input type="text" id="id" name="id" size="50px" readonly="readonly"></td>
					</tr>
					<tr>
						<th class="table-primary">제목</th>
						<td><input type="text" class="form-control" name="title" size="50px"></td>
					</tr>
					<tr>
						<th class="table-primary">내용</th>
						<td><textarea class="form-control" rows="10" name="content"></textarea></td>
					</tr>
					<tr>
						<td colspan="2" align="center">
							<button type="button" id="writeBtn" class="btn btn-secondary">등록</button>
						</td>	
					</tr>
				</table>
			</div>
		</form>
	</div>
	<script type="text/javascript">
		let login = sessionStorage.getItem("login");
		let id = JSON.parse(login).id;
		$("#id").val(id);
		
		$("#writeBtn").click(function() {
			$.ajax({
				url:"http://localhost:3000/bbsWrite",
				type:"get",
				data:$("#frm").serialize(),
				success:function(msg){
					//alert('success')
					if(msg == "YES"){
						alert('작성 완료');
						location.href = "bbsList.html";	
					}else{
						alert('게시글 업로드에 실패하였습니다.');
					}
				},error:function(){
					alert('error');
				}
			});
		});
	</script>
</body>
</html>